{% extends '::layout.html.twig' %}
{% block title %}Kindie | Gestión de la aplicación{% endblock %}
    {% block contenido %}
        <div class="row">
            <div class="col s12">
                <ul class="tabs">
                    <li class="tab col s3"><a href="#test1">Usuarios</a></li>
                    <li class="tab col s3"><a class="active" href="#test2">Nuevos Proyectos<span class="contador">{{ contador_proyectos }}</span></a></li>
                    <li class="tab col s3"><a href="#test3">Comentarios</a></li>
                </ul>
            </div>
            <div id="test1" class="col s12">
                <h4 class="center">Gestión de usuarios</h4>
                {% if usuarios %}
                <table id="tabla_usuarios" class="display">
                    <thead>
                    <tr>
                        <th>Usuario</th>
                        <th>Email</th>
                        <th>Administrador</th>
                        <th>Creador</th>
                        <th>Colaborador</th>
                        <th>Teléfono</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for user in usuarios %}
                    <tr>
                        <td>{{ user.nombreUsuario }}</td>
                        <td>{{ user.email }}</td>
                        <td>{% if user.esAdmin %}Si{% else %}No{% endif %}</td>
                        <td>{% if user.esCreador %}Si{% else %}No{% endif %}</td>
                        <td>{% if user.esParticipante %}Si{% else %}No{% endif %}</td>
                        <td>{{ user.telefono }}</td>
                        <td></td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% else %}
                    <h4 class="center">No hay usuarios registrados</h4>
                {% endif %}
            </div>
            <div id="test2" class="col s12">
                <h4 class="center">Validación de proyectos</h4>
                {% if proyectos %}
                <ul class="collapsible" data-collapsible="accordion">
                    {% for proyecto in proyectos %}
                    <li>
                        <div class="collapsible-header"><i class="mdi-social-whatshot"></i>{{ proyecto.nombre }}</div>
                        <div class="collapsible-body"><p>Lorem ipsum dolor sit amet.</p></div>
                    </li>
                    {% endfor %}
                </ul>
                    {% else %}
                    <h4 class="center">No hay nuevos proyectos que validar</h4>
                {% endif %}
            </div>
            <div id="test3" class="col s12">
                <h4 class="center">Moderación de comentarios</h4>
                <div class="col s12 m10 l8 offset-l2">
                    <ul class="lista-cometarios">
                        {% if comentarios %}
                            {% for coment in comentarios %}
                                <li class="comentario-item">
                                    <img src="{{ asset('bundles/app/images/usuario/perfil_demo.jpg') }}" alt="" class="circle">
                                    <span class="title"> {{ coment.usuario.nombreUsuario }} </span>&nbsp;
                                    <span class="fecha"> el <strong>{{ coment.fecha|date('d/m/Y') }}</strong> a las <strong>{{ coment.fecha|date('H:i:s') }}</strong></span>
                                    <p>
                                        {{ coment.texto }}
                                    </p>

                                </li>
                            {% endfor %}
                            {% else %}
                            <h4 class="center">No hay comentarios que moderar</h4>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>

    {% endblock %}
{% block scripts %}
    <script>
        $(document).ready( function () {
            $('#tabla_usuarios').DataTable( {
                responsive: true
            } );
        } );
    </script>
{% endblock %}